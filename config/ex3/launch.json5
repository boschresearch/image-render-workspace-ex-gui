
// <LICENSE id="CC BY 4.0">
//
//   Image-Render Workspace 'examples'
//   Copyright 2022 Robert Bosch GmbH and its subsidiaries
//   
//   This work is licensed under the 
//   
//       Creative Commons Attribution 4.0 International License.
//   
//   To view a copy of this license, visit 
//       http://creativecommons.org/licenses/by/4.0/ 
//   or send a letter to 
//       Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
//   
//
// </LICENSE>
{
    // The type identifier of this file
    sDTI: "/catharsys/launch:3.0",
    
    // The id of this launch parameter set
    sId: "${filebasename}",
    
    // Some information what this configuration is for
    sInfo: "GUI Example 3",
    sInfoFile: "info.md",


    mGui: { 
        "sDTI": "/catharsys/gui/settings:1.0",
        "mGridLayout": {
            "actions": {
                "iColumnCount": 2,
                "lGroups": [
                   {
                        "sTitle": "Render",
                        "lRows": [
                            ["iRenderQuality"]
                        ]
                    },
                    {
                        "sTitle": "Execution",
                        "lRows": [
                            ["bDoProcess", "bDoOverwrite"],
                        ]
                    },
                    {
                        "sTitle": "Configurations",
                        "lRows": [
                            ["iConfigStartX", "iConfigCountX"],
                            ["iConfigStartY", "iConfigCountY"],
                        ]
                    }
                ]
            },
        //     "trial": {
        //         "iColumnCount": 2,
        //         "lGroups": [
        //            {
        //                 "sTitle": "Scenario",
        //                 "lRows": [
        //                     ["sBlenderFilename"],
        //                     ["cam", "sObject"],
        //                 ]
        //             },
        //             {
        //                 "sTitle": "Modifiers",
        //                 "lRows": [
        //                     ["mod"],
        //                 ]
        //             },
        //         ]
        //     }
             
        },
        lExcludeVars: [
            "iFrameFirst", "iFrameLast", "iFrameStep", "bDoStoreProcessData",
        ],
    },

    // The default arguments used for all actions.
    // Each action can override these parameters.
    mGlobalArgs: {
        // The type identifier for this data structure.
        // Make sure to use version 1.1, so that parameters
        // 'iConfigGroups' and 'iFrameGroups' are supported.
        sDTI: "/catharsys/launch/args:1.1",

        // IMPORTANT: All files of type '.json', '.json5' and '.ison' can be
        //            referenced by their basename alone, without the extension.
        //            The appropriate extension is added automatically.

        // The name of the trial file to use.
        sTrialFile: "trial",

        // The execution configuraion file.
        // IMPORTANT: All file paths are regarded as relative 
        //            to the path of the current file.
        sExecFile: "exec",

        // The following are Catharsys pre-defined variables 
        // that are automatically shown in the GUI if not explicitly excluded.
        iFrameFirst: 0,
        iFrameLast: 0,
        iFrameStep: 1,
        iRenderQuality: 4,
        // sTopFolder: "test",
        bDoProcess: true,
        bDoOverwrite: true,
        bDoStoreProcessData: false,

        // These are defined per action:
        // iConfigGroups: 1,
        // iFrameGroups: 1,
        // iMaxLocalWorkers: 1,

        // //////////////////////////////////////////////////////////////////////////
        // USER DEFINED VARIABLES
        // These are automatically shown in the GUI 
        // if they follow the standard naming convention.
        // See documentation of image-render-gui module for more info.
        iConfigStartX: 1,
        iConfigCountX: 2,

        iConfigStartY: 1,
        iConfigCountY: 2,
 
    },

    // The map of all actions that can be launched
    mActions: {
        // An arbitrarily chosen name for an action.
        // In this case it makes sense to call it 'gen', as it
        // generates a new Blender file.
        render: {
            sDTI: "/catharsys/launch/action:1.0",
            // The id of the action
            sActionDTI: "/catharsys/action/std/blender/render/std:1.0",

            // The action configuration.
            // The parameters defined in 'mConfig' override the 'mGlobalArgs'.
            mConfig: {
                sDTI: "/catharsys/launch/args:1.1",

                // The following two parameters are only useful when processing
                // on an job scheduling system like LSF, where multiple jobs can be run in parallel.
                //
                // This parameter defines in how many groups all configurations are collected.
                // The number of configurations is determined by the trial configuration.
                // For values <= 0, there is one group for each configuration.
                iConfigGroups: 1,

                // This parameter defines in how man groups all frames are collected.
                // iFrameGroups: 1,
                //
                // The total number of jobs generated are the number of configuration groups
                // times the number of frame groups.
                //
                // For example, suppose there are three configurations, each with 10 frames,
                // and iConfigGroups = 0 and iFrameGroups = 2, then there are 3*2 = 6 jobs,
                // two jobs per configuration each rendering 5 frames.

                // Maximal number of local processes for action. 
                // If the action is executed on a LSF system, this only determines
                // how many processes are started to create the configurations.
                // For local rendering, this gives the number of parallel
                // Blender processes.
                iMaxLocalWorkers: 1,

           }
        },

        depth: {
            sDTI: "/catharsys/launch/action:1.0",
            sActionDTI: "/catharsys/action/std/blender/post-render/proc-depth:1.0",
            mConfig: {
                sDTI: "/catharsys/launch/args:1.1",
                // Using the python execution configuration,
                // because the depth is post-processed by a python script.
                sExecFile: "exec-py",
                iConfigGroups: 1,
                // iFrameGroups: 1,
                iMaxLocalWorkers: 1,

            }
        },
    },

}

